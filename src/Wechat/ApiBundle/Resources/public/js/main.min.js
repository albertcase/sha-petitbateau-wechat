var formstr={temail:function(e){var t=new RegExp("^[0-9a-zA-Z._-]+@[0-9a-zA-Z-]+.[0-9a-zA-Z]+(.[0-9a-zA-Z]+){0,1}$");return!!t.test(e)},tmenuname:function(e){var t=0,n=e.length;if(!e)return 0;for(var a=0;a<n;a++)t+=e.charCodeAt(a)>255?2:1;return t>0&&t<=16},turl:function(e){var t=new RegExp("^.{1,1000}$");return!!t.test(e)},ttype:function(e){var t=new RegExp("^.{1,50}$");return!(!t.test(e)||"0"==e)},tname:function(e){var t=new RegExp("^.{1,20}$");return!!t.test(e)},tnonull:function(e){var t=new RegExp("^.{1,50}$");return!!t.test(e)},tnonull2:function(e){var t=new RegExp("^.{1,1000}$");return!!t.test(e)},tinfostr:function(e){var t=new RegExp("^.{8,100}$");return!!t.test(e)},ttoken:function(e){var t=new RegExp("^[0-9a-zA-Z]{3,32}$");return!!t.test(e)},tAesKey:function(e){var t=new RegExp("^[0-9a-zA-Z]{43}$");return!!t.test(e)},tipstr:function(e,t,n){var a=formstr[t](e);return a||popup.openwarning(n),a},tipstrobj:function(e,t,n){var a=e.val(),o=formstr[t](a);return o||(popup.openwarning(n),e.parent().addClass("has-error")),o},tall:function(e){for(var t=e.length,n=this,a=!0,o="0";o<t;o++)a=a&&n.tipstr(e[o][0],e[o][1],e[o][2]);return a},tallobj:function(e){$(".has-error").each(function(){$(this).removeClass("has-error")});for(var t=e.length,n=this,a=!0,o="0";o<t;o++)a=n.tipstrobj(e[o][0],e[o][1],e[o][2])&&a;return a}},mouseinfo={mouseL:null,mouseT:null,initMouse:function(e){this.mouseL=e.clientX,this.mouseT=e.clientY}},fileupload={sendfiles:function(e,t){var n=this;popup.openprogress();var a=new FormData,o=new XMLHttpRequest;a.append("uploadfile",e),o.open("POST","/wechat/uploadimage"),o.onload=function(e){if(popup.closeprogress(),200===o.status){var n=JSON.parse(o.responseText);if("10"==n.code)return fileupload.replaceinput(n.path,t),popup.openwarning("upload success"),!0;popup.openwarning(n.msg)}else popup.openwarning("upload error")},o.upload.onprogress=n.updateProgress,o.send(a)},updateProgress:function(e){if(e.lengthComputable){var t=e.loaded,n=e.total,a=(100*t/n).toFixed(2);popup.goprogress(a)}},replaceinput:function(e,t){var n='<i class="fa fa-times"></i><img src="'+e+'" style="width:200px;display:block;" class="newspic">';t.after(n),t.remove()},replaceimage:function(e){var t='<input type="file" name="uploadfile" class="newsfile">';e.next().remove(),e.after(t),e.remove()}},popup={warningshow:function(e,t){var n=this,a=$(document.createElement("div"));return a.addClass("warningbox").append(t),a.prependTo($(e)).hide().slideDown(),a.one("click",function(){n.warningautomove($(this))}),n.warningclear(a),!0},warningautomove:function(e){e.fadeOut(function(){this.remove()})},warningclear:function(e){setTimeout(this.warningautomove,"3000",e)},openprogress:function(){$("#myprogress").show()},closeprogress:function(){$("#myprogress").hide()},goprogress:function(e){$("#myprogress .progress-bar").attr("aria-valuenow",e),$("#myprogress .progress-bar").css("width",e+"%"),$("#myprogress .sr-only").text(e+"%")},openwarning:function(e){this.warningshow("#warningpopup",e)},opencomfirm:function(e,t){var n="<div>"+e+"</div>";n+="<div>",n+='<button type="button" onclick="popup.closecomfirm()" class="btn btn-default btn-sm">CANCEL</button>&nbsp;&nbsp;',n+='<button type="button" onclick="'+t+'" class="btn btn-primary btn-sm">TRUE</button>',n+="</div>",$("#comfirmpopup > .comfirmpopup").html(n),$("#comfirmpopup").show()},closecomfirm:function(){$("#comfirmpopup>.comfirmpopu").empty(),$("#comfirmpopup").hide()},openloading:function(){$("#loadingpopup").show()},closeloading:function(){$("#loadingpopup").hide()}},htmlconetnt={medialistobj:null,ajaxloadmedialist:function(e){popup.openloading();var t={};e&&(t={timestamp:e,order:"bottom"}),$.ajax({url:"/wechat/newsget",type:"post",dataType:"json",data:t,success:function(e){popup.closeloading(),"10"==e.code&&$(htmlconetnt.medialistobj[0]).append(htmlconetnt.mdeiacontent(e.list)),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},mdeiacontent:function(e){var t="";for(var n in e){var a=e[n].length,o=0;a>0&&(o=e[n][0].update_time),t+='<div class="msg-mediacard" newstime="'+o+'">',t+='<input type="radio" class="msgnewradio"  name="msgnewradio" id="r'+n+'" value="'+n+'" />',t+='<div class="msgnewul">',t+="<ul>",a>0&&(t+="<li style=\"background-repeat: no-repeat;background-size:cover;background-image:url('/cimg.php?style=w_400&amp;image="+encodeURIComponent(e[n][0].thumb_url)+"')\">",t+="<p>"+e[n][0].title+"</p>",t+='<a href="'+e[n][0].url+'" target="_blank">点击预览</a>',t+="</li>");for(var s=1;s<a;s++)t+="<li>",t+="<p>"+e[n][s].title+"</p>",t+='<img src="/cimg.php?style=w_400&amp;image='+encodeURIComponent(e[n][s].thumb_url)+'">',t+='<a href="'+e[n][s].url+'" target="_blank">点击预览</a>',t+="</li>";t+="</ul>",t+="</div>",t+='<div class="msgnewbutton"><label for="r'+n+'" class="label"><i class="fa fa-check"></i><i class="msg-check">Pick</i></button></div>',t+="</div>"}return t},mediamessage:function(){if(!htmlconetnt.medialistobj){var e='<div class="msg-conetnt"></div>';e+='<button class="msg-renew btn btn-default btn-xs"><i class="fa fa-chevron-down"></i></button>',htmlconetnt.medialistobj=$(e),htmlconetnt.ajaxloadmedialist()}return $(htmlconetnt.medialistobj[1]).click(function(){var e=$(htmlconetnt.medialistobj[0]).children(".msg-mediacard").last().attr("newstime");htmlconetnt.ajaxloadmedialist(e)}),htmlconetnt.medialistobj},locationmessage:function(){var e="<br><b>Send your location</b>";return e},none:function(){var e="";return e},externalpage:function(){var e="<br>";return e+='<div class="form-group">',e+="<label>Redirect to:</label>",e+='<input class="form-control viewurl" placeholder="Enter Your Url" style="width:90%">',e+="</div>"},aview:function(e){var t="<br>";return t+='<div class="form-group">',t+="<label>Redirect to:</label>",t+='<input class="form-control viewurl" placeholder="Enter Your Url" style="width:90%" value="'+e+'">',t+="</div>"},pushmessage:function(){var e="<br>";e+='<div class="newslist">',e+='<i class="fa fa-minus-square" style="color:red"></i>',e+='<div class="form-group">',e+="<label>Title:</label>",e+='<input class="form-control newstitle" placeholder="Enter TITLE" style="width:90%">',e+="</div>",e+='<div class="form-group">',e+="<label>Description:</label>",e+='<input class="form-control newsdescription" placeholder="Enter Your Description" style="width:90%">',e+="</div>",e+='<div class="form-group">',e+="<label>Link:</label>",e+='<input class="form-control newslink" placeholder="Enter Your Url" style="width:90%" name="link">',e+="</div>",e+='<div class="form-group">',e+="<label>Cover:</label>",e+='<input type="file" name="uploadfile" class="newsfile">',e+="</div>",e+="<hr>",e+="</div>",e+='<i class="fa fa-plus-square" style="color:green"></i>',e+='<button type="button" style="margin-left:10px" class="btn btn-primary btn-xs mytipsboxcs">From Online<span style="position:relative"></span></button>';var t=$(e);return $(t[3]).click(function(e){mytipsbox.insertnewsP=$(this),mytipsbox.selecttipbox(),e.stopPropagation()}),t},loadpushmessage:function(e){var t="";t+='<div class="newslist">',t+='<i class="fa fa-minus-square" style="color:red"></i>',t+='<div class="form-group">',t+="<label>Title:</label>",t+='<input class="form-control newstitle" placeholder="Enter TITLE" value="'+e.Title+'" style="width:90%">',t+="</div>",t+='<div class="form-group">',t+="<label>Description:</label>",t+='<input class="form-control newsdescription" placeholder="Enter Your Description" value="'+e.Description+'" style="width:90%">',t+="</div>",t+='<div class="form-group">',t+="<label>Link:</label>",t+='<input class="form-control newslink" placeholder="Enter Your Url" style="width:90%" value="'+e.Url+'" name="link">',t+="</div>",t+='<div class="form-group">',t+="<label>Cover:</label>",t+='<i class="fa fa-times"></i><img src="'+e.PicUrl+'" style="width:200px;display:block;" class="newspic">',t+="</div>",t+="<hr>",t+="</div>",t+='<i class="fa fa-plus-square" style="color:green"></i>',t+='<button type="button" style="margin-left:10px" class="btn btn-primary btn-xs mytipsboxcs">From Online<span></span></button>';var n=$(t);return $(n[2]).click(function(e){mytipsbox.insertnewsP=$(this),mytipsbox.selecttipbox(),e.stopPropagation()}),n},apushmessage:function(e){for(var t=e.length,n="<br>",a=0;a<t;a++)n+='<div class="newslist">',n+='<i class="fa fa-minus-square" style="color:red"></i>',n+='<div class="form-group">',n+="<label>Title:</label>",n+='<input class="form-control newstitle" placeholder="Enter TITLE" style="width:90%" value="'+e[a].Title+'">',n+="</div>",n+='<div class="form-group">',n+="<label>Description:</label>",n+='<input class="form-control newsdescription" placeholder="Enter Your Description" style="width:90%" value="'+e[a].Description+'">',n+="</div>",n+='<div class="form-group">',n+="<label>Link:</label>",n+='<input class="form-control newslink" placeholder="Enter Your Url" style="width:90%" name="link" value="'+e[a].Url+'">',n+="</div>",n+='<div class="form-group">',n+="<label>Cover:</label>",n+='<i class="fa fa-times"></i><img src="'+e[a].PicUrl+'" style="width:200px;display:block;" class="newspic">',n+="</div>",n+="<hr>",n+="</div>";t<10&&(n+='<i class="fa fa-plus-square" style="color:green"></i>',n+='<button type="button" style="margin-left:10px" class="btn btn-primary btn-xs mytipsboxcs">From Online<span></span></button>');var o=$(n);return o.each(function(){$(this).is(".mytipsboxcs")&&$(this).click(function(e){mytipsbox.insertnewsP=$(this),mytipsbox.selecttipbox(),e.stopPropagation()})}),o},textmessage:function(){var e="<br>";return e+='<div class="form-group">',e+="<label>MESSAGE</label>",e+='<textarea class="form-control textcontent" rows="3"></textarea>',e+="</div>"},atextmessage:function(e){var t="<br>";return t+='<div class="form-group">',t+="<label>MESSAGE</label>",t+='<textarea class="form-control textcontent" rows="3">'+e+"</textarea>",t+="</div>"},addnewshtml:function(){var e='<div class="newslist">';e+='<i class="fa fa-minus-square" style="color:red"></i>',e+='<div class="form-group">',e+="<label>Title:</label>",e+='<input class="form-control newstitle" placeholder="Enter TITLE" style="width:90%">',e+="</div>",e+='<div class="form-group">',e+="<label>Description:</label>",e+='<input class="form-control newsdescription" placeholder="Enter Your Description" style="width:90%">',e+="</div>",e+='<div class="form-group">',e+="<label>Link:</label>",e+='<input class="form-control newslink" placeholder="Enter Your Url" style="width:90%" name="link">',e+="</div>",e+='<div class="form-group">',e+="<label>Cover:</label>",e+='<input type="file" name="uploadfile" class="newsfile">',e+="</div>",e+="<hr>",e+="</div>",e+='<i class="fa fa-plus-square" style="color:green"></i>',e+='<button type="button" style="margin-left:10px" class="btn btn-primary btn-xs mytipsboxcs">From Online<span></span></button>';var t=$(e);return $(t[2]).click(function(e){mytipsbox.insertnewsP=$(this),mytipsbox.selecttipbox(),e.stopPropagation()}),t},tagkeyword:function(){var e='<div class="form-group">';return e+="<label>Keyword:</label>",e+='<i class="fa fa-minus-circle"></i>',e+='<input class="form-control inputkeyword" placeholder="Enter Keyword" style="width:80%">',e+="</div>"},showtagkeyword:function(e){for(var t=e.length,n="",a=0;a<t;a++)n+='<div class="form-group">',n+="<label>Keyword:</label>",n+='<i class="fa fa-minus-circle"></i>',n+='<input class="form-control inputkeyword" placeholder="Enter Keyword" style="width:80%" value="'+e[a]+'">',n+="</div>";return n+='<i class="fa fa-plus-circle"></i>'},belongtohtml:function(e){var t="";e.length;for(var n in e)t+='<option value="'+n+'">'+e[n]+"</option>";return t}},menu={mbuttonfun:null,subbuttonfun:null,editbuttonfun:null,editinfo:null,delobj:null,edithidden:0,showfeedback:function(e){var t=this,n=e.attr("action");0==$("#myModal ."+n+" div").length&&$("#myModal ."+n).html(htmlconetnt[n]()),$("#myModal .menushow").removeClass("menushow"),$("#myModal ."+n).addClass("menushow"),t.mbuttonfun="m"+n},showfeedback2:function(e){var t=this,n=e.attr("action");0==$("#submenu ."+n+" div").length&&$("#submenu ."+n).html(htmlconetnt[n]()),$("#submenu .menushow").removeClass("menushow"),$("#submenu ."+n).addClass("menushow"),t.subbuttonfun="sub"+n},showfeedback3:function(e){var t=this,n=e.attr("action");0==$("#editmenu ."+n+" div").length&&$("#editmenu ."+n).html(htmlconetnt[n]()),$("#editmenu .menushow").removeClass("menushow"),$("#editmenu ."+n).addClass("menushow"),t.editbuttonfun="edit"+n},mnone:function(){var e={"buttonaddm[menuName]":$("#myModal .menuname").val()};return e},mexternalpage:function(){var e={"buttonaddm[menuName]":$("#myModal .menuname").val(),"buttonaddm[eventtype]":"view","buttonaddm[eventUrl]":$("#myModal .viewurl").val()};return e},mpushmessage:function(){var e=this,t=(new Date).getTime(),n={"buttonaddm[menuName]":$("#myModal .menuname").val(),"buttonaddm[eventtype]":"click","buttonaddm[MsgType]":"news","buttonaddm[eventKey]":"e"+t,"buttonaddm[newslist]":e.getnewslist($("#myModal .pushmessage .newslist"))};return n},getnewslist:function(e){var t=[];e.length;return e.each(function(){var e=$(this),n={};n={Title:e.find(".newstitle").val(),Description:e.find(".newsdescription").val(),Url:e.find(".newslink").val(),PicUrl:e.find(".newspic").attr("src")},t.push(n)}),JSON.stringify(t)},mtextmessage:function(){var e=(new Date).getTime(),t={"buttonaddm[menuName]":$("#myModal .menuname").val(),"buttonaddm[eventtype]":"click","buttonaddm[Content]":$("#myModal .textcontent").val(),"buttonaddm[MsgType]":"text","buttonaddm[eventKey]":"e"+e};return t},mlocationmessage:function(){var e=(new Date).getTime(),t={"buttonaddm[menuName]":$("#myModal .menuname").val(),"buttonaddm[eventtype]":"location_select","buttonaddm[eventKey]":"e"+e};return t},subnone:function(){var e={"buttonaddsub[menuName]":$("#submenu .menuname").val(),"buttonaddsub[mOrder]":$("#submenu .belongto").val()};return e},subexternalpage:function(){var e={"buttonaddsub[menuName]":$("#submenu .menuname").val(),"buttonaddsub[mOrder]":$("#submenu .belongto").val(),"buttonaddsub[eventtype]":"view","buttonaddsub[eventUrl]":$("#submenu .viewurl").val()};return e},subpushmessage:function(){var e=this,t=(new Date).getTime(),n={"buttonaddsub[menuName]":$("#submenu .menuname").val(),"buttonaddsub[mOrder]":$("#submenu .belongto").val(),"buttonaddsub[eventtype]":"click","buttonaddsub[MsgType]":"news","buttonaddsub[eventKey]":"e"+t,"buttonaddsub[newslist]":e.getnewslist($("#submenu .pushmessage .newslist"))};return n},subtextmessage:function(){var e=(new Date).getTime(),t={"buttonaddsub[menuName]":$("#submenu .menuname").val(),"buttonaddsub[mOrder]":$("#submenu .belongto").val(),"buttonaddsub[eventtype]":"click","buttonaddsub[Content]":$("#submenu .textcontent").val(),"buttonaddsub[MsgType]":"text","buttonaddsub[eventKey]":"e"+e};return t},sublocationmessage:function(){var e=(new Date).getTime(),t={"buttonaddsub[menuName]":$("#submenu .menuname").val(),"buttonaddsub[mOrder]":$("#submenu .belongto").val(),"buttonaddsub[eventtype]":"location_select","buttonaddsub[eventKey]":"e"+e};return t},editexternalpage:function(){var e=this,t={"buttonupdate[id]":e.editinfo.id,"buttonupdate[menuName]":$("#editmenu .menuname").val(),"buttonupdate[eventtype]":"view","buttonupdate[eventUrl]":$("#editmenu .viewurl").val()};return t},editpushmessage:function(){var e,t=this;e=t.editinfo.hasOwnProperty("eventKey")&&t.editinfo.eventKey?t.editinfo.eventKey:"e"+(new Date).getTime();var n={"buttonupdate[id]":t.editinfo.id,"buttonupdate[menuName]":$("#editmenu .menuname").val(),"buttonupdate[eventtype]":"click","buttonupdate[MsgType]":"news","buttonupdate[eventKey]":e,"buttonupdate[newslist]":t.getnewslist($("#editmenu .pushmessage .newslist"))};return n},edittextmessage:function(){var e,t=this;e=t.editinfo.hasOwnProperty("eventKey")&&t.editinfo.eventKey?t.editinfo.eventKey:"e"+(new Date).getTime();var n={"buttonupdate[id]":t.editinfo.id,"buttonupdate[menuName]":$("#editmenu .menuname").val(),"buttonupdate[eventtype]":"click","buttonupdate[Content]":$("#editmenu .textcontent").val(),"buttonupdate[MsgType]":"text","buttonupdate[eventKey]":e};return n},editlocationmessage:function(){var e=(new Date).getTime(),t=this,n={"buttonupdate[id]":t.editinfo.id,"buttonupdate[menuName]":$("#editmenu .menuname").val(),"buttonupdate[eventtype]":"location_select","buttonupdate[eventKey]":"e"+e};return n},editnone:function(){var e=this,t={"buttonupdate[id]":e.editinfo.id,"buttonupdate[menuName]":$("#editmenu .menuname").val()};return t},cleaninput:function(e){$(e+" input").each(function(){$(this).val("")}),$(e).find(".externalpage").html(""),$(e).find(".pushmessage").html(""),$(e).find(".textmessage").html("")},ajaxaddmbutton:function(){popup.openloading();var e=this,t=menu[e.mbuttonfun]();$.ajax({type:"post",url:"/wechatmenu/addmbutton",data:t,dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(menu.cleaninput("#myModal"),$("#myModal").modal("hide"),popup.openwarning(e.msg),menu.ajaxreload(),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),menu.ajaxreload(),popup.openwarning("unknow error")}})},ajaxaddsubbutton:function(){popup.openloading();var e=this,t=menu[e.subbuttonfun]();$.ajax({type:"post",url:"/wechatmenu/addsubbutton",data:t,dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(menu.cleaninput("#submenu"),$("#submenu").modal("hide"),popup.openwarning(e.msg),menu.ajaxreload(),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxreload:function(){$.ajax({type:"post",url:"/wechatmenu/getmenus",dataType:"json",success:function(e){$(".menu-hierarachy").html(menu.buildtd(e.menus)),menu.menumovelisten(),menu.recoverMneus()},error:function(){popup.openwarning("unknow error")}})},buildtd:function(e){for(var t=e.length,n="",a=0;a<t;a++)n+='<div class="m-slid" menuid="'+e[a].data.id+'">',n+='<input id="s'+e[a].data.id+'" type="checkbox" class="d-scbu d-scboxinput" '+(this.menuStatus.hasOwnProperty("s"+e[a].data.id)&&this.menuStatus["s"+e[a].data.id]?"checked='checked'":"")+">",n+='<div class="m-slidbar">',n+='<div class="m-sonshow m-push-left">',e[a].hasOwnProperty("son")&&e[a].son.length&&(n+='<label for="s'+e[a].data.id+'" class="d-scbox">',n+='<i class="fa fa-chevron-right"></i>',n+='<i class="fa fa-chevron-down"></i>',n+="</label>"),n+="</div>",n+='<div class="m-menuinfo m-push-left">',n+='<div class="m-menuname m-push-left">'+e[a].data.menuName+"</div>",n+='<div class="m-menuevent m-push-left">'+(e[a].data.eventtype?e[a].data.eventtype:"")+"</div>",n+="</div>",n+='<div class="m-menumove m-push-right">',n+='<i class="fa fa-arrows fa-lg"></i>',n+="</div>",n+='<div class="m-menuchange  m-push-right">',n+='<i class="fa fa-trash-o fa-lg"></i>',n+='<i class="fa fa-edit fa-lg"></i>',n+="</div>",n+="</div>",n+='<div class="m-slidbox">',e[a].hasOwnProperty("son")&&e[a].son.length&&(n+=menu.buildtd(e[a].son)),n+="</div>",n+="</div>";return n},delbutton:function(){obj=this.delobj;var e=obj.parent().parent().parent().attr("menuid");popup.openloading(),$.ajax({type:"post",url:"/wechatmenu/deletebutton",dataType:"json",data:{"buttondel[id]":e},success:function(e){return popup.closeloading(),"10"==e.code?(popup.closecomfirm(),menu.ajaxreload(),popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},publishmenu:function(){popup.openloading(),$.ajax({url:"/wechatmenu/createmenu",type:"post",dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},ajaxgetmbuttom:function(){popup.openloading(),$.ajax({url:"/wechatmenu/getmmenu",type:"post",dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?($("#submenu .belongto").html(htmlconetnt.belongtohtml(e.menus)),$("#submenu").modal("show"),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},ajaxgetbuttoninfo:function(e){popup.openloading(),$.ajax({url:"/wechatmenu/getbuttoninfo",type:"post",dataType:"json",data:{"buttoninfo[id]":e},success:function(e){return popup.closeloading(),"10"==e.code?(menu.editbutton(e.info),$("#editmenu").modal("show"),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},editbutton:function(e){var t=this;if(t.editinfo=e,$("#editmenu .buttontype .active").removeClass("active"),$("#editmenu .menuname").val(e.menuName),$("#editmenu .menushow").removeClass("menushow"),t.editbuttonfun="editnone",t.edithidden)return $("#editmenu .buttontype").hide(),!1;if("view"==e.eventtype)return $("#editmenu .externalpage").addClass("menushow"),$("#editmenu .buttontype .btn").eq(0).addClass("active"),$("#editmenu .externalpage").html(htmlconetnt.aview(e.eventUrl)),t.editbuttonfun="editexternalpage",!0;if("click"==e.eventtype){if(e.buttonevent.hasOwnProperty("newslist"))return $("#editmenu .pushmessage").addClass("menushow"),$("#editmenu .buttontype .btn").eq(1).addClass("active"),$("#editmenu .pushmessage").html(htmlconetnt.apushmessage(e.buttonevent.newslist)),t.editbuttonfun="editpushmessage",!0;if("text"==e.buttonevent.MsgType)return $("#editmenu .textmessage").addClass("menushow"),$("#editmenu .buttontype .btn").eq(2).addClass("active"),$("#editmenu .textmessage").html(htmlconetnt.atextmessage(e.buttonevent.Content)),t.editbuttonfun="edittextmessage",!0}return"location_select"==e.eventtype?($("#editmenu .locationmessage").addClass("menushow"),$("#editmenu .buttontype .btn").eq(3).addClass("active"),t.editbuttonfun="editlocationmessage",!0):void 0},ajaxupdatebutton:function(){popup.openloading();var e=this,t=menu[e.editbuttonfun]();$.ajax({url:"/wechatmenu/updatebutton",data:t,type:"post",dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(menu.ajaxreload(),menu.cleaninput("#editmenu"),popup.openwarning(e.msg),$("#editmenu").modal("hide"),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},historyindex:null,removehistorystyle:function(e){this.historyindex!=e&&null!==this.historyindex&&menu.onmoveingBox.parent().parent().children(".m-slid").eq(this.historyindex).removeAttr("style"),this.historyindex=e},buildNewList:function(){var e=parseInt(menu.onmoveingBox.parent().css("top")),t=parseInt(e/menu.boxheight)+(parseInt(e%menu.boxheight)>parseInt(menu.boxheight/2)?0:-1),n=menu.onmoveingBox.parent().parent();t>=menu.boxindex&&(t+=1),t!=-1?(n.children(".m-slid").eq(t).after(menu.onmoveingBox.parent()),t!=menu.boxindex-1&&menu.buildNewListJson()):(n.prepend(menu.onmoveingBox.parent()),0!=menu.boxindex&&menu.buildNewListJson())},buildNewListJson:function(){var e=[];menu.onmoveingBox.parent().parent().children(".m-slid").each(function(){e.push($(this).attr("menuid"))});var t=menu.onmoveingBox.parent().parent().parent().attr("menuid");t=t?t:0,menu.NewList[t]=e,$(".menu-changeranking").show(),menu.onmoveingBox.addClass("barchange"),console.log(menu.NewList)},menuStatus:{},saveMenustatus:function(e){this.menuStatus[e]=!$("#"+e).prop("checked")},recoverMneus:function(){for(var e in this.menuStatus)$("#"+e).prop("checked",this.menuStatus[e])},NewList:[],submitNewlist:function(){popup.openloading();var e=this;$.ajax({url:"/wechatmenu/newmenuranking",data:{"newmenuranking[menulist]":e.NewList},type:"post",dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(menu.ajaxreload(),$(".menu-changeranking").hide(),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},menumousemoveM:function(e){e.preventDefault();var t=e.clientY-mouseinfo.mouseT,n=parseInt(t+menu.slidboxT),a=parseInt(t/menu.boxheight)+parseInt(t>0?1:-1)+menu.boxindex,o=Math.abs(parseInt(t%menu.boxheight)),s=t>0?menu.boxheight-o:o,i=menu.boxheight-s;n<=0&&(s=menu.boxheight,i=0,n=0,a=0==menu.boxindex?1:0),n>=parseInt(parseInt(menu.slidboxLength-1)*menu.boxheight)&&(n=parseInt(menu.slidboxLength-1)*menu.boxheight,s=0,i=menu.boxheight,a=menu.boxindex==parseInt(menu.slidboxLength-1)?parseInt(menu.slidboxLength-2):parseInt(menu.slidboxLength-1)),menu.onmoveingBox.parent().css({position:"absolute",top:n,width:menu.boxwidth,"z-index":100,opacity:.8}),a!=menu.boxindex&&menu.onmoveingBox.parent().parent().children(".m-slid").eq(a).css({"margin-top":s+"px","margin-bottom":i+"px"}),menu.removehistorystyle(a)},slidboxT:null,slidboxLength:null,boxheight:null,boxindex:null,boxwidth:null,initSlidbox:function(){this.onmoveingBox.parent().parent().find(".d-scboxinput").each(function(){$(this).prop("checked",!1)}),this.slidboxT=this.onmoveingBox[0].offsetTop,this.boxheight=parseInt(this.onmoveingBox.parent().css("height")),this.boxindex=this.onmoveingBox.parent().index(),this.boxwidth=parseInt(this.onmoveingBox.parent().css("width")),this.slidboxLength=this.onmoveingBox.parent().parent().children(".m-slid").length},onmoveingBox:null,removeBoxListener:function(){menu.removehistorystyle(null),menu.buildNewList(),document.removeEventListener("mousemove",menu.menumousemoveM),menu.onmoveingBox.parent().removeAttr("style"),menu.recoverMneus(),document.removeEventListener("mouseup",menu.removeBoxListener)},menumovelisten:function(){$(".menu-hierarachy .m-slidbar .m-menumove").each(function(){$(this)[0].addEventListener("mousedown",function(e){mouseinfo.initMouse(e),menu.onmoveingBox=$(this).parent(),menu.initSlidbox(),document.addEventListener("mousemove",menu.menumousemoveM),document.addEventListener("mouseup",menu.removeBoxListener)})})},onload:function(){var e=this;$("#myModal .buttontype .btn").click(function(){$("#myModal .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showfeedback($(this))}),$("#menufun>.addmainmenu").click(function(){e.mbuttonfun||(e.mbuttonfun="mnone"),$("#myModal").modal("show")}),$("#menufun>.addsubmenu").click(function(){e.subbuttonfun||(e.subbuttonfun="subnone"),e.ajaxgetmbuttom()}),$("#submenu .buttontype .btn").click(function(){$("#submenu .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showfeedback2($(this))}),$("#editmenu .buttontype .btn").click(function(){$("#editmenu .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showfeedback3($(this))}),$("#myModal .addmmenusubmit").click(function(){e.ajaxaddmbutton()}),$("#menufun>.publish").click(function(){e.publishmenu()}),$("#myModal").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#myModal").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#myModal .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#myModal .pushmessage .fa-minus-square").length>=10&&($("#myModal .pushmessage .fa-plus-square").remove(),$("#myModal .pushmessage .mytipsboxcs").remove())}),$("#myModal").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#myModal").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#submenu").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#submenu").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#submenu .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#submenu .pushmessage .fa-minus-square").length>=10&&($("#submenu .pushmessage .fa-plus-square").remove(),$("#submenu .pushmessage .mytipsboxcs").remove())}),$("#submenu").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#submenu").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#editmenu").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#editmenu").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#editmenu .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#editmenu .pushmessage .fa-minus-square").length>=10&&($("#editmenu .pushmessage .fa-plus-square").remove(),$("#editmenu .pushmessage .mytipsboxcs").remove())}),$("#editmenu").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#editmenu").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#addsubmenusubmit").click(function(){e.ajaxaddsubbutton()}),$(".menu-hierarachy").on("click",".m-menuchange .fa-edit",function(){var t=$(this).parent().parent().parent(),n=t.attr("menuid");e.edithidden=0,$("#editmenu .buttontype").removeAttr("style"),t.children(".m-slidbox").eq(0).children("div").length&&(e.edithidden=1),e.ajaxgetbuttoninfo(n)}),$(".menu-hierarachy").on("click",".m-menuchange .fa-trash-o",function(){e.delobj=$(this),popup.opencomfirm("delete this menu ???","menu.delbutton()")}),$("#savechange").click(function(){e.ajaxupdatebutton()}),$(".menu-hierarachy").on("mouseup",".m-sonshow",function(){var t=$(this).children(".d-scbox").attr("for");e.saveMenustatus(t)}),$("#rangkingsave").click(function(){e.submitNewlist()})}},keyword={editinfo:null,addfun:null,editfun:null,cleanadd:function(){$("#addtagdiv .inputtagname").val("");var e='<div class="form-group">';e+="<label>Key Word:</label>",e+='<i class="fa fa-minus-circle"></i>',e+='<input class="form-control inputkeyword" placeholder="Enter Key Word" style="width:80%">',e+="</div>",e+='<i class="fa fa-plus-circle"></i>',$("#addtagdiv .taglist").html(e),$("#addtagdiv .pushmessage").html(htmlconetnt.pushmessage()),$("#addtagdiv .textmessage").html(htmlconetnt.textmessage())},gotolist:function(){$("#tagnav .active").removeClass("active"),$("#tagnav li").eq(0).addClass("active"),$("#tagmanage .navshow").removeClass("navshow"),$("#taglist").addClass("navshow")},showaddedit:function(e){var t=this,n=e.attr("action");0==$("#addtagdiv ."+n+" div").length&&$("#addtagdiv ."+n).html(htmlconetnt[n]()),$("#addtagdiv .menushow").removeClass("menushow"),$("#addtagdiv ."+n).addClass("menushow"),t.addfun="a"+n},showaddedit2:function(e){var t=this,n=e.attr("action");0==$("#tagkeyslist ."+n+" div").length&&$("#tagkeyslist ."+n).html(htmlconetnt[n]()),$("#tagkeyslist .menushow").removeClass("menushow"),$("#tagkeyslist ."+n).addClass("menushow"),t.editfun="e"+n},apushmessage:function(){var e=this,t={"keywordadd[Tagname]":$("#addtagdiv .inputtagname").val(),"keywordadd[keywords]":e.getkeywords($("#addtagdiv .taglist .inputkeyword")),"keywordadd[MsgType]":"news","keywordadd[newslist]":menu.getnewslist($("#addtagdiv .pushmessage .newslist"))};return t},atextmessage:function(){var e=this,t={"keywordadd[Tagname]":$("#addtagdiv .inputtagname").val(),"keywordadd[keywords]":e.getkeywords($("#addtagdiv .taglist .inputkeyword")),"keywordadd[MsgType]":"text","keywordadd[Content]":$("#addtagdiv .textcontent").val()};return t},epushmessage:function(){var e=this,t={"keywordupdate[menuId]":e.editinfo.menuId,"keywordupdate[Tagname]":$("#tagkeyslist .inputtagname").val(),"keywordupdate[keywords]":e.getkeywords($("#tagkeyslist .taglist .inputkeyword")),"keywordupdate[MsgType]":"news","keywordupdate[newslist]":menu.getnewslist($("#tagkeyslist .pushmessage .newslist"))};return t},etextmessage:function(){var e=this,t={"keywordupdate[menuId]":e.editinfo.menuId,"keywordupdate[Tagname]":$("#tagkeyslist .inputtagname").val(),"keywordupdate[keywords]":e.getkeywords($("#tagkeyslist .taglist .inputkeyword")),"keywordupdate[MsgType]":"text","keywordupdate[Content]":$("#tagkeyslist .textcontent").val()};return t},getkeywords:function(e){var t=[];return e.each(function(){t.push($(this).val())}),JSON.stringify(t)},ajaxtaglist:function(){popup.openloading(),$.ajax({url:"/wechat/getkeywordlist",type:"post",dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&keyword.buildtbody(e.list),"9"==e.code&&keyword.buildtbody({}),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error");
}})},ajaxdeltag:function(e){popup.openloading(),$.ajax({url:"/wechat/keyworddel",type:"post",dataType:"json",data:{"keyworddel[menuId]":e},success:function(e){return popup.closeloading(),"10"==e.code?(keyword.ajaxtaglist(),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},taglisttable:null,buildtbody:function(e){this.taglisttable&&this.taglisttable.destroy(),$("#taglisttable tbody").empty(),this.taglisttable=$("#taglisttable").DataTable({data:e,columns:[{data:"Tagname"},{class:"t-center",data:null,defaultContent:'<i class="fa fa-edit fa-lg"></i>'},{class:"t-center",data:null,defaultContent:'<i class="fa fa-trash-o fa-lg"></i>'}],rowCallback:function(e,t){$(e).attr("menuid",t.menuId)}})},ajaxaddtag:function(){var e=this;popup.openloading();var t=keyword[e.addfun]();$.ajax({url:"/wechat/keywordadd",type:"post",dataType:"json",data:t,success:function(e){return popup.closeloading(),"10"==e.code&&(keyword.ajaxtaglist(),keyword.cleanadd(),keyword.gotolist()),popup.openwarning(e.msg),!0},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxtaginfo:function(e){popup.openloading(),$.ajax({url:"/wechat/getkeywordinfo",type:"post",dataType:"json",data:{"keywordinfo[menuId]":e},success:function(e){return popup.closeloading(),"10"==e.code?(keyword.buildtaginfo(e.info),$("#tagmanagepanel .navshow").removeClass("navshow"),$("#tagkeyslist").addClass("navshow"),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},buildtaginfo:function(e){var t=this;return t.editinfo=e,$("#tagkeyslist .taglist").html(htmlconetnt.showtagkeyword(e.getContent)),$("#tagkeyslist .inputtagname").val(e.Tagname),$("#tagkeyslist .buttontype .active").removeClass("active"),$("#tagkeyslist .menushow").removeClass("menushow"),"text"==e.MsgType?($("#tagkeyslist .buttontype .btn").eq(0).addClass("active"),$("#tagkeyslist .textmessage").addClass("menushow"),t.editfun="etextmessage",$("#tagkeyslist .textmessage").html(htmlconetnt.atextmessage(e.Content)),!0):"news"==e.MsgType?($("#tagkeyslist .buttontype .btn").eq(1).addClass("active"),$("#tagkeyslist .pushmessage").addClass("menushow"),t.editfun="epushmessage",$("#tagkeyslist .pushmessage").html(htmlconetnt.apushmessage(e.newslist)),!0):void 0},keywordupdate:function(){var e=this;popup.openloading();var t=keyword[e.editfun]();$.ajax({url:"/wechat/keywordupdate",type:"post",dataType:"json",data:t,success:function(e){return popup.closeloading(),"10"==e.code?(keyword.ajaxtaglist(),keyword.gotolist(),popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},onload:function(){var e=this;$("#addtagdiv .buttontype .btn").click(function(){$("#addtagdiv .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showaddedit($(this))}),$("#tagnav .message").click(function(){$("#tagmanage .active").removeClass("active"),$(this).parent().addClass("active"),$("#tagmanage .navshow").removeClass("navshow");var e=$(this).attr("active");$("#"+e).addClass("navshow")}),$("#addtagdiv .taglist").on("click",".fa-plus-circle",function(){$(this).before(htmlconetnt.tagkeyword)}),$("#addtagdiv .taglist").on("click",".fa-minus-circle",function(){$(this).parent().remove()}),$("#addtagdiv").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#addtagdiv").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#addtagdiv .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#addtagdiv .pushmessage .fa-minus-square").length>=10&&($("#addtagdiv .pushmessage .fa-plus-square").remove(),$("#addtagdiv .pushmessage .mytipsboxcs").remove())}),$("#addtagdiv").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#addtagdiv").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#tagkeyslist").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#tagkeyslist").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#tagkeyslist .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#tagkeyslist .pushmessage .fa-minus-square").length>=10&&($("#tagkeyslist .pushmessage .fa-plus-square").remove(),$("#tagkeyslist .pushmessage .mytipsboxcs").remove())}),$("#tagkeyslist").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#tagkeyslist").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#tagkeyslist .taglist").on("click",".fa-plus-circle",function(){$(this).before(htmlconetnt.tagkeyword)}),$("#tagkeyslist .taglist").on("click",".fa-minus-circle",function(){$(this).parent().remove()}),$("#tagkeyslist .buttontype .btn").click(function(){$("#tagkeyslist .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showaddedit2($(this))}),$("#addtagsubmit").click(function(){e.ajaxaddtag()}),$("#taglist").on("click","tbody .fa-trash-o",function(){var t=$(this).parent().parent().attr("menuid");e.ajaxdeltag(t)}),$("#tagkeyslist .panel-heading .fa-mail-reply").click(function(){$("#tagmanagepanel .navshow").removeClass("navshow"),$("#taglist").addClass("navshow")}),$("#taglist").on("click","tbody .fa-edit",function(){var t=$(this).parent().parent().attr("menuid");e.ajaxtaginfo(t)}),$("#tagchangesubmit").click(function(){e.keywordupdate()})}},autoreplay={welcomefun:null,defaultfun:null,navactive:null,getEvent:null,showwelcome:function(e){var t=this,n=e.attr("action");0==$("#welcomemessage ."+n+" div").length&&$("#welcomemessage ."+n).html(htmlconetnt[n]()),$("#welcomemessage .menushow").removeClass("menushow"),$("#welcomemessage ."+n).addClass("menushow"),t.welcomefun="w"+n},showdefault:function(e){var t=this,n=e.attr("action");0==$("#defaultmessage ."+n+" div").length&&$("#defaultmessage ."+n).html(htmlconetnt[n]()),$("#defaultmessage .menushow").removeClass("menushow"),$("#defaultmessage ."+n).addClass("menushow"),t.defaultfun="d"+n},wpushmessage:function(){var e={"autoreply[getMsgType]":"event","autoreply[getEvent]":"subscribe","autoreply[MsgType]":"news","autoreply[newslist]":menu.getnewslist($("#welcomemessage .pushmessage .newslist"))};return e},wtextmessage:function(){var e={"autoreply[getMsgType]":"event","autoreply[getEvent]":"subscribe","autoreply[MsgType]":"text","autoreply[Content]":$("#welcomemessage .textcontent").val()};return e},dpushmessage:function(){var e={"autoreply[getMsgType]":"event","autoreply[getEvent]":"defaultback","autoreply[MsgType]":"news","autoreply[newslist]":menu.getnewslist($("#defaultmessage .pushmessage .newslist"))};return e},dtextmessage:function(){var e={"autoreply[getMsgType]":"event","autoreply[getEvent]":"defaultback","autoreply[MsgType]":"text","autoreply[Content]":$("#defaultmessage .textcontent").val()};return e},ajaxwecomeup:function(){popup.openloading();var e=this,t=autoreplay[e.welcomefun]();$.ajax({url:"/wechat/autoreply",type:"post",dataType:"json",data:t,success:function(e){return popup.closeloading(),"10"==e.code?(popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxdefaultup:function(){popup.openloading();var e=this,t=autoreplay[e.defaultfun]();$.ajax({url:"/wechat/autoreply",type:"post",dataType:"json",data:t,success:function(e){return popup.closeloading(),"10"==e.code?(popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxautoreply:function(e){popup.openloading();$.ajax({url:"/wechat/autoreplyinfo",type:"post",dataType:"json",data:{"autoreplyload[getEvent]":e},success:function(e){return $("#"+autoreplay.navactive).addClass("navshow"),popup.closeloading(),"10"==e.code?(autoreplay.buildMsg(e.info),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},buildMsg:function(e){var t=this;return"text"==e.MsgType?("defaultmessage"==t.navactive&&(autoreplay.defaultfun="dtextmessage"),"welcomemessage"==t.navactive&&(autoreplay.welcomefun="wtextmessage"),$("#"+t.navactive+" .buttontype .btn").eq(0).addClass("active"),$("#"+t.navactive+" .textmessage").addClass("menushow"),$("#"+t.navactive+" .textmessage").html(htmlconetnt.atextmessage(e.MsgData.Content)),!0):"news"==e.MsgType?((t.navactive="defaultmessage")&&(autoreplay.defaultfun="dpushmessage"),"welcomemessage"==t.navactive&&(autoreplay.welcomefun="wpushmessage"),$("#"+t.navactive+" .buttontype .btn").eq(1).addClass("active"),$("#"+t.navactive+" .pushmessage").addClass("menushow"),$("#"+t.navactive+" .pushmessage").html(htmlconetnt.apushmessage(e.MsgData.Articles)),!0):void 0},ajaxreplydel:function(e){popup.openloading();$.ajax({url:"/wechat/autoreplydel",type:"post",dataType:"json",data:{"autoreplydel[getEvent]":e,"autoreplydel[getMsgType]":"event"},success:function(e){return popup.closeloading(),"10"==e.code?(autoreplay.cleanMsg($("#"+autoreplay.navactive)),autoreplay.ajaxautoreply(autoreplay.getEvent),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},cleanMsg:function(e){e.find(".pushmessage").html(""),e.find(".textmessage").html("")},onload:function(){var e=this;$("#autoreplaynav .message").click(function(){$("#autoreplaynav .active").removeClass("active"),$(this).parent().addClass("active"),$("#autoreload .navshow").removeClass("navshow");var t=$(this).attr("active");e.getEvent=$(this).attr("getEvent"),e.navactive=t,e.cleanMsg($("#"+t)),e.ajaxautoreply(e.getEvent)}),$("#welcomemessage .buttontype>.btn").click(function(){$("#welcomemessage .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showwelcome($(this))}),$("#defaultmessage .buttontype>.btn").click(function(){$("#defaultmessage .buttontype .active").removeClass("active"),$(this).addClass("active"),e.showdefault($(this))}),$("#welcomemessage .savebutton").click(function(){e.ajaxwecomeup()}),$("#defaultmessage .savebutton").click(function(){e.ajaxdefaultup()}),$("#welcomemessage .welcomedel").click(function(){e.ajaxreplydel("subscribe")}),$("#defaultmessage .defaultdel").click(function(){e.ajaxreplydel("defaultback")}),$("#welcomemessage").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#welcomemessage").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#welcomemessage .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#welcomemessage .pushmessage .fa-minus-square").length>=10&&($("#welcomemessage .pushmessage .fa-plus-square").remove(),$("#welcomemessage .pushmessage .mytipsboxcs").remove())}),$("#welcomemessage").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#welcomemessage").on("click",".fa-times",function(){fileupload.replaceimage($(this))}),$("#defaultmessage").on("click",".fa-minus-square",function(){$(this).parent().remove()}),$("#defaultmessage").on("click",".fa-plus-square",function(){var e=htmlconetnt.addnewshtml();$("#defaultmessage .pushmessage .mytipsboxcs").remove(),$(this).after(e),$(this).remove(),$("#defaultmessage .pushmessage .fa-minus-square").length>=10&&($("#defaultmessage .pushmessage .fa-plus-square").remove(),$("#defaultmessage .pushmessage .mytipsboxcs").remove())}),$("#defaultmessage").on("change",".newsfile",function(){fileupload.sendfiles($(this)[0].files[0],$(this))}),$("#defaultmessage").on("click",".fa-times",function(){fileupload.replaceimage($(this))})}},preference={editinfo:null,permiss:[],permissid:null,ajaxchangpwd:function(){var e=[[$("#changepwd .oldpassword"),"tnonull","the oldpassword is empty"],[$("#changepwd .newpassword"),"tnonull","the newpassword is empty"],[$("#changepwd .newpassword2"),"tnonull","the repeat password is empty"]];return!!formstr.tallobj(e)&&($("#changepwd .newpassword").val()!==$("#changepwd .newpassword2").val()?(popup.openwarning("the repeat password error"),!1):(popup.openloading(),void $.ajax({url:"/user/changepwd",type:"post",dataType:"json",data:{"changepwd[oldpassword]":$("#changepwd .oldpassword").val(),"changepwd[newpassword]":$("#changepwd .newpassword2").val()},success:function(e){popup.closeloading(),"10"==e.code&&preference.cleanpsw(),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})))},ajaxadduser:function(){var e=[[$("#adduserbox .username"),"tnonull","the username is empty"],[$("#adduserbox .newpassword"),"tnonull","the password is empty"],[$("#adduserbox .newpassword2"),"tnonull","the repeat password is empty"]];return!!formstr.tallobj(e)&&($("#adduserbox .newpassword").val()!==$("#adduserbox .newpassword2").val()?(popup.openwarning("the repeat password error"),!1):(popup.openloading(),void $.ajax({url:"/user/creatadmin",type:"post",dataType:"json",data:{"adminadd[username]":$("#adduserbox .username").val(),"adminadd[password]":$("#adduserbox .newpassword2").val()},success:function(e){popup.closeloading(),"10"==e.code&&($("#adduserbox").modal("hide"),preference.ajaxgetadmins()),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})))},ajaxdeluser:function(e){popup.openloading(),$.ajax({url:"/user/userdel",type:"post",dataType:"json",data:{"admindel[id]":e},success:function(e){popup.closeloading(),"10"==e.code&&preference.ajaxgetadmins(),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxgetadmins:function(){return window.location.reload(),!0},getadmininfo:function(e){popup.openloading(),$.ajax({url:"/user/getadminerinfo",type:"post",dataType:"json",data:{"admininfo[id]":e},success:function(e){return popup.closeloading(),"10"==e.code?(preference.editinfo=e.info,$("#edituserbox .adminname").text(e.info.username),$("#edituserbox").modal("show"),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},adminchangepwd:function(){var e=[[$("#edituserbox .newpassword"),"tnonull","the password is empty"],[$("#edituserbox .newpassword2"),"tnonull","the repeat password is empty"]];return!!formstr.tallobj(e)&&($("#edituserbox .newpassword").val()!==$("#edituserbox .newpassword2").val()?(popup.openwarning("the repeat password error"),!1):(popup.openloading(),void $.ajax({url:"/user/admincpw",type:"post",dataType:"json",data:{"admincpw[id]":preference.editinfo.id,"admincpw[newpassword]":$("#edituserbox .newpassword2").val()},success:function(e){popup.closeloading(),"10"==e.code&&$("#edituserbox").modal("hide"),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})))},buildtbody:function(e){for(var t=e.length,n="",a="0";a<t;a++)n+='<tr class="odd gradeX" userid="'+e[a].id+'">',n+="<td>"+e[a].username+"</td>",n+="<td>"+e[a].latestTime+"</td>",n+='<td class="center"><i class="fa fa-edit fa-lg"></i></td>',n+='<td class="center"><i class="fa fa-trash-o fa-lg"></i></td>',n+="</tr>";return n},cleanpsw:function(){$("#changepwd .oldpassword").val(""),$("#changepwd .newpassword2").val(""),$("#changepwd .newpassword").val("")},cleanadduser:function(){$("#adduserbox .username").val(""),$("#adduserbox .newpassword2").val(""),$("#adduserbox .newpassword").val("")},cleanadmincpw:function(){$("#edituserbox .newpassword2").val(""),$("#edituserbox .newpassword").val("")},buildpertable:function(e){var t="",n=0;for(var a in e.allpers){var o=e.pers.indexOf(a);t+="<tr>",t+="<td>"+e.allpers[a]+"</td>",t+="<td style='text-align:center'>",t+='<input type="checkbox" id="per'+n+'" class="pidselect"/ perid="'+a+'" '+(o==-1?"":"checked=checked")+">",t+='<label for="per'+n+'"><i class="fa fa-toggle-on fa-lg"></i><i class="fa fa-toggle-off fa-lg"></i></label>',t+="</td></tr>",n++}return t},ajaxpermissionget:function(e){popup.openloading(),$.ajax({url:"/user/getpermission",type:"post",dataType:"json",data:{uid:e},success:function(e){popup.closeloading(),"10"==e.code&&($("#permissiontables tbody").html(preference.buildpertable(e)),$("#edituserpermission").modal("show")),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},getUserPers:function(e){var t=this;t.permiss=[],$(e).each(function(){$(this).prop("checked")&&t.permiss.push($(this).attr("perid"))})},ajaxsetPermission:function(){var e=this;popup.openloading(),e.getUserPers("#permissiontables .pidselect"),$.ajax({url:"/user/permissionset",type:"post",dataType:"json",data:{uid:e.permissid,premission:JSON.stringify(e.permiss)},success:function(e){popup.closeloading(),"10"==e.code&&$("#edituserpermission").modal("hide"),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},onload:function(){var e=this;$("#preferencenav .message").click(function(){$("#preferencenav .active").removeClass("active"),$(this).parent().addClass("active"),$("#preference .navshow").removeClass("navshow");var e=$(this).attr("active");$("#"+e).addClass("navshow")}),$("#changepwd .save").click(function(){e.ajaxchangpwd()}),$("#menufun .adduser").click(function(){e.cleanadduser(),$("#adduserbox").modal("show")}),$("#adduserbox .addusersubmit").click(function(){e.ajaxadduser()}),$("#usermanage").on("click","tbody .fa-trash-o",function(){var t=$(this).parent().parent().attr("userid");e.ajaxdeluser(t)}),$("#usermanage").on("click","tbody .fa-edit",function(){var t=$(this).parent().parent().attr("userid");e.cleanadmincpw(),e.getadmininfo(t)}),$("#edituserbox .changepwdsubmit").click(function(){e.adminchangepwd()}),$("#usertables").on("click","tbody .fa-exclamation-circle",function(){var t=$(this).parent().parent().attr("userid");e.permissid=t,e.ajaxpermissionget(t)}),$("#edituserpermission").on("click",".changepresubmit",function(){e.ajaxsetPermission()})}},webpage={editpageid:null,cleaninput:function(){$("#addpage .pagename").val(""),$("#addpage .pagetitle").val(""),CKEDITOR.instances.editor1.setData("")},ajaxarticleup:function(){var e=[[$("#addpage .pagename"),"tnonull","the pagename is empty"],[$("#addpage .pagetitle"),"tnonull","the pagetitle is empty"]];return!!formstr.tallobj(e)&&(popup.openloading(),void $.ajax({url:"/article/articleadd",type:"post",dataType:"json",data:{"articleadd[pagename]":$("#addpage .pagename").val(),"articleadd[pagetitle]":$("#addpage .pagetitle").val(),"articleadd[content]":CKEDITOR.instances.editor1.getData()},success:function(e){return popup.closeloading(),"10"==e.code?(webpage.cleaninput(),webpage.ajaxpagelist(),webpage.gotolist(),popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}}))},ajaxdelarticle:function(e){popup.openloading(),$.ajax({url:"/article/deletearticle",type:"post",dataType:"json",data:{"articledel[pageid]":e},success:function(e){return popup.closeloading(),"10"==e.code?(popup.openwarning(e.msg),webpage.ajaxpagelist(),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},gotolist:function(){$("#pagmanagenav .active").removeClass("active"),$("#pagmanagenav li").eq(0).addClass("active"),$("#pagmanage .navshow").removeClass("navshow"),$("#pagelist").addClass("navshow")},ajaxpagelist:function(){popup.openloading(),$.ajax({url:"/article/articlelist",type:"post",dataType:"json",success:function(e){return popup.closeloading(),"10"==e.code?(webpage.buildlist(e.list),!0):("9"==e.code&&webpage.buildlist({}),void popup.openwarning(e.msg))},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},pagelisttable:null,buildlist:function(e){this.pagelisttable&&this.pagelisttable.destroy(),$("#pagelisttable tbody").empty(),this.pagelisttable=$("#pagelisttable").DataTable({data:e,columns:[{data:"pagename"},{data:"pagetitle"},{data:"pageid",render:function(e,t,n){return e?'<a target="_blank" href="/page/'+e+'">'+pagecode.hosts+"/page/"+e+"</a>":""}},{data:"submiter"},{data:"edittime"},{class:"t-center",data:null,defaultContent:'<i class="fa fa-edit fa-lg"></i>'},{class:"t-center",data:null,defaultContent:'<i class="fa fa-trash-o fa-lg"></i>'}],rowCallback:function(e,t){$(e).attr("pageid",t.pageid)}})},getarticle:function(e){popup.openloading(),$.ajax({url:"/article/getarticle",type:"post",dataType:"json",data:{"articleinfo[pageid]":e},success:function(e){if(popup.closeloading(),"10"==e.code)return webpage.editpageid=e.article.pageid,$("#editpage .pagename").val(e.article.pagename),$("#editpage .pagetitle").val(e.article.pagetitle),CKEDITOR.instances.editor2.setData(e.article.content),$("#pagmanage .navshow").removeClass("navshow"),$("#editpage").addClass("navshow"),!0},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},updatearticle:function(){var e=[[$("#editpage .pagename"),"tnonull","the pagename is empty"],[$("#editpage .pagetitle"),"tnonull","the pagetitle is empty"]];return!!formstr.tallobj(e)&&(popup.openloading(),void $.ajax({url:"/article/editarticle",type:"post",dataType:"json",data:{"articleedit[pageid]":webpage.editpageid,"articleedit[pagename]":$("#editpage .pagename").val(),"articleedit[pagetitle]":$("#editpage .pagetitle").val(),"articleedit[content]":CKEDITOR.instances.editor2.getData()},success:function(e){return popup.closeloading(),"10"==e.code?(webpage.ajaxpagelist(),webpage.gotolist(),popup.openwarning(e.msg),!0):void popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}}))},onload:function(){var e=this;$("#pagmanagenav .message").click(function(){$("#pagmanagenav .active").removeClass("active"),$(this).parent().addClass("active"),$("#pagmanage .navshow").removeClass("navshow");var e=$(this).attr("active");$("#"+e).addClass("navshow")}),$("#articlesubmit").click(function(){e.ajaxarticleup()}),$("#pagelist").on("click","tbody .fa-trash-o",function(){var t=$(this).parent().parent().attr("pageid");e.ajaxdelarticle(t)}),$("#pagelist").on("click","tbody .fa-edit",function(){var t=$(this).parent().parent().attr("pageid");e.getarticle(t)}),$("#editpagesubmit").click(function(){e.updatearticle()}),$("#editpage .fa-mail-reply").click(function(){webpage.gotolist()})}},groupnews={grouptagid:null,mediaid:null,buildnewssend:function(e){var t=this,n=e.parent().prev();$("#newsselect").html(n.clone().html()),t.mediaid=e.attr("media-id"),t.ajaxgetgroups()},buildgroupscontrol:function(e){for(var t="<option value='none'>Choose Tag</option>",n=e.length,a=0;a<n;a++)t+="<option value='"+e[a].id+"'>"+e[a].name+"</option>";return t},ajaxgetgroups:function(){popup.openloading(),$.ajax({url:"/wechat/getgrouptags",type:"post",dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&($("#groupscontrol").html(groupnews.buildgroupscontrol(e.tags)),$("#groupnewspop").modal("show")),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxsendpre:function(){return"none"==$("#groupscontrol").val()?(popup.openwarning("please choose a group"),!1):(popup.openloading(),void $.ajax({url:"/wechat/setsendnewsevent",type:"post",dataType:"json",data:{grouptagid:$("#groupscontrol").val(),mediaid:groupnews.mediaid,groupname:$("#groupscontrol").find("option:selected").text()},success:function(e){popup.closeloading(),"10"==e.code&&(groupnews.createtemppage(e.tempid),$("#groupnewspop").modal("hide")),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}}))},createtemppage:function(e){var t=this,n=$(document.createElement("div"));n.addClass("autoclosediv");var a='<div><div style="font-size:30px;color:red;font-weight:bold;height:30%"></div>';a+='<div style="height:30%;text-align:left;font-size:20px;padding:10px">',a+="please within 100s send below code to MaxMara Wechat. so that this News can be send your a news preview",a+='</div><div style="height:40%;font-size:20px;color:blue;padding-top:30px">'+e,a+="</div></div>",n.html(a),n.appendTo("body"),t.autotemppage(n,100)},autotemppage:function(e,t){return t<=0?(e.fadeOut(function(){this.remove()}),!0):(e.children().children().eq(0).text(t),t--,void setTimeout(function(){groupnews.autotemppage(e,t)},"1000"))},groupnewscontent:function(e){var t="";for(var n in e){var a=e[n].length,o=0;a>0&&(o=e[n][0].update_time),t+='<div style="float:left;padding:20px" newstime="'+o+'" class="groupnews-card">',t+='<div class="newscard">',t+="<div>",t+="<div>",t+="<ul>",a>0&&(t+="<li style=\"background-repeat: no-repeat;background-size:cover;background-image:url('/cimg.php?style=w_400&amp;image="+encodeURIComponent(e[n][0].thumb_url)+"')\">",t+="<p>"+e[n][0].title+"</p>",t+='<a href="'+e[n][0].url+'" target="_blank">点击预览</a>',t+="</li>");for(var s=1;s<a;s++)t+="<li>",t+="<p>"+e[n][s].title+"</p>",t+='<img src="/cimg.php?style=w_400&amp;image='+encodeURIComponent(e[n][s].thumb_url)+'">',t+='<a href="'+e[n][s].url+'" target="_blank">点击预览</a>',t+="</li>";t+="</ul>",t+="</div>",t+="</div>",t+="<div>",t+='<button type="button" class="btn btn-primary groupnewssend" media-id="'+n+'">Group Send</button>',t+="</div>",t+="</div>",t+="</div>"}return t},ajaxloadnewslist:function(e,t){popup.openloading();var n={};e&&(n={timestamp:e,order:t}),$.ajax({url:"/wechat/newsget",type:"post",dataType:"json",data:n,success:function(e){popup.closeloading(),"10"==e.code&&(this.hasOwnProperty("data")&&this.data.hasOwnProperty("order")?("bottom"==this.data.order&&$("#groupnewscontent").append(groupnews.groupnewscontent(e.list)),"top"==this.data.order&&$("#groupnewscontent").prepend(groupnews.groupnewscontent(e.list))):$("#groupnewscontent").append(groupnews.groupnewscontent(e.list))),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow errors")}})},onload:function(){var e=this;$("#groupnewspanel").on("click",".groupnewssend",function(){e.buildnewssend($(this))}),$("#groupnewssubmit").click(function(){e.ajaxsendpre()}),$(".groupnews-sync").on("click","",function(){var e=$("#groupnewscontent").children(".groupnews-card").first().attr("newstime");e||(e=1),groupnews.ajaxloadnewslist(e,"top")}),$(".groupnews-renew").on("click","",function(){var e=$("#groupnewscontent").children(".groupnews-card").last().attr("newstime");groupnews.ajaxloadnewslist(e,"bottom")})}},jssdk={gotolist:function(){$("#jssdkmanagepanel .navshow").each(function(){$(this).removeClass("navshow")}),$("#jssdknav .active").each(function(){$(this).removeClass("active")}),$("#jssdknav li").eq(0).addClass("active"),$("#jssdklist").addClass("navshow")},gotoedit:function(){$("#jssdkmanagepanel .navshow").each(function(){$(this).removeClass("navshow")}),$("#editjssdk").addClass("navshow")},ajaxloadlist:function(){popup.openloading(),$.ajax({url:"/wechat/jssdk/list",type:"post",dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&jssdk.buildjssdklist(e.list),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},initaddjssdk:function(){var e="wx.config({\n debug: true,\n";e+=" appId: wxsdk.appid,  //Not allowed to modify\n",e+=" timestamp: wxsdk.time,  //Not allowed to modify\n",e+=" nonceStr: wxsdk.noncestr,  //Not allowed to modify\n",e+=" signature: wxsdk.sign,  //Not allowed to modify\n",e+=" jsApiList: [\n\n   //allowed wechat API list\n",e+="  'checkJsApi',\n  'onMenuShareTimeline',\n  'onMenuShareAppMessage',\n  'onMenuShareQQ',\n  'onMenuShareWeibo',\n  'hideMenuItems',\n",e+="  'showMenuItems',\n  'hideAllNonBaseMenuItem',\n  'showAllNonBaseMenuItem',\n  'getNetworkType',\n  'openLocation',\n  'getLocation',\n  'hideOptionMenu',\n  'showOptionMenu',\n  'closeWindow'\n",e+="  ]\n});\n",$("#addjssdk .jssdkdomain").val(""),$("#addjssdk .jssdkname").val("")},ajaxaddjssdk:function(){popup.openloading(),$.ajax({url:"/wechat/jssdk/build",type:"post",data:{domain:$("#addjssdk .jssdkdomain").val(),name:$("#addjssdk .jssdkname").val()},dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&(jssdk.ajaxloadlist(),jssdk.gotolist(),jssdk.initaddjssdk()),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxjssdkinfo:function(e){popup.openloading(),$.ajax({url:"/wechat/jssdk/info",type:"post",data:{id:e},dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&($("#editjssdk .jssdkdomain").val(e.info.domain),$("#editjssdk .jssdkname").val(e.info.name),jssdk.gotoedit()),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},jssdkeditid:null,ajaxjssdkupdate:function(){var e=this;popup.openloading(),$.ajax({url:"/wechat/jssdk/update",type:"post",data:{id:e.jssdkeditid,domain:$("#editjssdk .jssdkdomain").val(),name:$("#editjssdk .jssdkname").val()},dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&(jssdk.ajaxloadlist(),jssdk.gotolist()),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},ajaxjssdkdel:function(){var e=this;popup.openloading(),$.ajax({url:"/wechat/jssdk/delete",type:"post",data:{id:e.jssdkeditid},dataType:"json",success:function(e){popup.closeloading(),"10"==e.code&&(jssdk.ajaxloadlist(),jssdk.gotolist()),popup.openwarning(e.msg)},error:function(){popup.closeloading(),popup.openwarning("unknow error")}})},jssdklisttable:null,buildjssdklist:function(e){this.jssdklisttable&&this.jssdklisttable.destroy(),$("#jssdklisttable tbody").empty(),this.jssdklisttable=$("#jssdklisttable").DataTable({data:e,columns:[{data:"name"},{data:"jsfilename",render:function(e,t,n){return e?'<a target="_blank" href="/api/v1/js/'+e+'/wechat">'+pagecode.hosts+"/api/v1/js/"+e+"/wechat</a>":""}},{data:"username"},{class:"t-center",data:null,defaultContent:'<i class="fa fa-edit fa-lg"></i>'},{class:"t-center",data:null,defaultContent:'<i class="fa fa-trash-o fa-lg"></i>'}],rowCallback:function(e,t){$(e).attr("jsid",t.id)}})},onload:function(){var e=this;$("#jssdknav .message").click(function(){$("#jssdknav .active").each(function(){$(this).removeClass("active")}),active=$(this).attr("active"),$("#jssdkmanagepanel .navshow").each(function(){$(this).removeClass("navshow")}),$("#"+active).addClass("navshow"),"addjssdk"==active&&jssdk.initaddjssdk(),$(this).parent().addClass("active")}),$("#jssdkmanagepanel .fa-mail-reply").click(function(){e.gotolist()}),$("#addjssdksubmit").click(function(){e.ajaxaddjssdk()}),$("#jssdklist").on("click","#jssdklisttable .fa-edit",function(){e.jssdkeditid=$(this).parent().parent().attr("jsid"),e.ajaxjssdkinfo(e.jssdkeditid)}),$("#editjssdksubmit").on("click",function(){e.ajaxjssdkupdate()}),$("#jssdklist").on("click","#jssdklisttable .fa-trash-o",function(){e.jssdkeditid=$(this).parent().parent().attr("jsid"),e.ajaxjssdkdel(e.jssdkeditid)})}},publicall={gotolist:function(){$(".navselect .active").each(function(){$(this).removeClass("active")}),$(".mainmanage .navshow").each(function(){$(this).removeClass("navshow")}),$(".navselect li").eq(0).addClass("active"),$(".mainmanage .navhide").eq(0).addClass("navshow")},gotoedit:function(e){$(".mainmanage .navshow").each(function(){$(this).removeClass("navshow")}),$("#"+e).addClass("navshow")},activemenu:function(e,t){$("#"+e+" .buttontype>.btn-default").each(function(){$(this).removeClass("active")}),$("#"+e+" .menushow").each(function(){$(this).removeClass("menushow")}),t.addClass("active");var n=t.attr("action");$("#"+e+" ."+n).addClass("menushow"),0==$("#"+e+" ."+n+" div").length&&$("#"+e+" ."+n).html(htmlconetnt[n]())},emptyactive:function(e){$("#"+e+" .buttontype>.btn-default").each(function(){$(this).removeClass("active")}),$("#"+e+" .menushow").each(function(){$(this).removeClass("menushow")}),$("#"+e+" .sonshow").each(function(){$(this).empty()})},onload:function(){$(".navselect").on("click",".message",function(){var e=$(this).attr("active");$(".navselect .active").each(function(){$(this).removeClass("active")}),$(".mainmanage .navshow").each(function(){$(this).removeClass("navshow");
}),$(this).parent().addClass("active"),$("#"+e).addClass("navshow")})}};$(function(){menu.onload(),keyword.onload(),autoreplay.onload(),preference.onload(),webpage.onload(),groupnews.onload(),jssdk.onload(),publicall.onload()});